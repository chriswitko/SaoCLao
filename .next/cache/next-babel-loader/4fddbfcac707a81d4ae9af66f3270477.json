{"ast":null,"code":"import \"antd/lib/message/style/css\";\nimport _message from \"antd/lib/message\";\nimport _ from \"lodash\";\nimport { useState, useEffect, useMemo } from \"react\";\nimport { myApiEndPoint, myApiAxiosInstance } from \"../../constants/myApi.constant\";\nimport { errorSelector } from \"../../helpers/utils.helper\";\nimport { useTrendingTracks, useAddTrendingTracks } from \"../../contexts/TrackContext\";\nexport const usePublicTracks = (endpoint, limit) => {\n  const trendingTracks = useTrendingTracks();\n  const addTrendingTracks = useAddTrendingTracks();\n  const {\n    0: offset,\n    1: setOffset\n  } = useState(\"\");\n  const {\n    0: hasMore,\n    1: setHasMore\n  } = useState(true);\n\n  const loadMore = async params => {\n    if (!hasMore) {\n      return;\n    }\n\n    try {\n      const res = await myApiAxiosInstance.get(endpoint, {\n        params: {\n          limit,\n          lastVisible: offset\n        }\n      });\n      if (res.data.lastVisible == \"end\") setHasMore(false);\n      addTrendingTracks(res.data.collection);\n      setOffset(res.data.lastVisible);\n    } catch (error) {\n      _message.error(errorSelector(error));\n    }\n  };\n\n  useEffect(() => {\n    loadMore();\n  }, []);\n  return {\n    trendingTracks,\n    loadMore,\n    hasMore\n  };\n};","map":null,"metadata":{},"sourceType":"module"}